{
    "$schema": "https://openapi.vercel.sh/vercel.json",
    "framework": null,
    "functions": {
        "api/index.php": {
            "runtime": "vercel-php@0.7.4",
            "memory": 1024,
            "maxDuration": 60
        }
    },
    "rewrites": [
        { "source": "/build/(.*)", "destination": "/public/build/$1" },
        { "source": "/storage/(.*)", "destination": "/public/storage/$1" },
        { "source": "/(.*)", "destination": "/api/index.php" }
    ],
    "installCommand": "npm ci || pnpm i || yarn --immutable || true",
    "buildCommand": "composer install --no-dev --prefer-dist --optimize-autoloader && composer run vercel-prep && composer run vercel && npm run build"
}
